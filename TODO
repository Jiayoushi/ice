Start from the bottom

1. Where possible, make functions into member functions
2. Response is maybe a bad idead, why don't you directly send it?
3. Test error response 500
4. Write function needs to be used as a for loop 
5. response, a better data structure?
